# 🧠 RAG Workbench - فاز 1

سیستم چانکینگ و جستجوی معنایی برای اسناد فارسی

## 📌 وضعیت پروژه

- ✅ **فاز 1: زیرساخت** - کامل
- ⏳ فاز 2: Chunking Engine - در انتظار
- ⏳ فاز 3: UI ایندکسینگ - در انتظار
- ⏳ فاز 4: Vector DB + جستجو - در انتظار
- ⏳ فاز 5: یکپارچه‌سازی - در انتظار

---

## 🚀 نصب و راه‌اندازی

### پیش‌نیازها

- Python 3.9 یا بالاتر
- pip

### مراحل نصب
```bash
# 1. کلون پروژه
git clone [repo-url]
cd RAG_Workbench

# 2. نصب وابستگی‌ها
pip install -r requirements.txt

# 3. تست فاز 1
python main.py
```

### (اختیاری) راه‌اندازی Ollama

برای فعال‌سازی Stage 3 (Semantic Embedding):
```bash
# نصب Ollama از ollama.ai

# راه‌اندازی سرویس
ollama serve

# دانلود مدل
ollama pull embeddinggemma
```

**نکته:** بدون Ollama، سیستم با Stage 1 و 2 کار می‌کند (دقت 85% به جای 95%).

---

## 📁 ساختار پروژه
```
RAG_Workbench/
├── main.py                 # تست فاز 1
├── config.ini              # تنظیمات
├── requirements.txt        # وابستگی‌ها
│
├── src/
│   ├── core/               # هسته سیستم
│   │   ├── preprocessor.py    # پیش‌پردازش متن
│   │   ├── embedder.py        # اتصال Ollama
│   │   └── config_manager.py  # مدیریت پروفایل
│   │
│   └── utils/              # ابزارهای کمکی
│       ├── logger.py          # سیستم لاگینگ
│       └── validators.py      # اعتبارسنجی
│
├── data/                   # داده‌های کاربر
│   ├── profiles/              # پروفایل‌های ذخیره شده
│   ├── chunked_files/         # (فاز 3)
│   └── vector_stores/         # (فاز 4)
│
└── logs/                   # لاگ‌های سیستم
    └── app.log
```

---

## ✅ فاز 1: زیرساخت (کامل شده)

### ویژگی‌های پیاده‌سازی شده:

#### 1️⃣ سیستم لاگینگ
- ✅ لاگ در فایل و console
- ✅ رنگ‌بندی خودکار
- ✅ پشتیبانی کامل فارسی
- ✅ Rotation خودکار

#### 2️⃣ اعتبارسنجی
- ✅ Regex validation
- ✅ Pattern line parsing
- ✅ Config validation
- ✅ File path validation

#### 3️⃣ پیش‌پردازش متن
- ✅ نرمالیزه‌سازی فارسی (hazm)
- ✅ حذف تگ‌های قبلی
- ✅ پاکسازی فضاها
- ✅ استخراج اطلاعات آماری

#### 4️⃣ اتصال Ollama
- ✅ بررسی خودکار اتصال
- ✅ Retry mechanism
- ✅ محاسبه شباهت
- ✅ Batch processing

#### 5️⃣ مدیریت پروفایل
- ✅ ذخیره/بارگذاری پروفایل
- ✅ 3 پروفایل پیش‌فرض
- ✅ Import/Export
- ✅ حذف پروفایل

---

## 🧪 تست فاز 1
```bash
python main.py
```

### خروجی مورد انتظار:
```
🚀 RAG Workbench - فاز 1: تست زیرساخت
══════════════════════════════════════════════

📝 تست 1: سیستم لاگینگ
   ✓ Logger راه‌اندازی شد
   ✓ فایل لاگ ایجاد شد

🔍 تست 2: اعتبارسنجی‌ها
   ✓ الگوی صحیح تأیید شد
   ✓ الگوی نامعتبر شناسایی شد
   ✓ Config صحیح تأیید شد

🧹 تست 3: پیش‌پردازش متن
   ✓ تگ‌ها و جداکننده‌ها حذف شدند
   ✓ اطلاعات استخراج شد

🔗 تست 4: اتصال به Ollama
   ✓ Ollama در دسترس است
   ✓ Embedding دریافت شد
   ✓ محاسبه شباهت

💾 تست 5: مدیریت پروفایل‌ها
   ✓ 3 پروفایل پیش‌فرض ایجاد شد
   ✓ ذخیره/بارگذاری پروفایل

📁 تست 6: ساختار پوشه‌ها
   ✓ تمام پوشه‌ها موجود است

══════════════════════════════════════════════
📊 نتایج تست
✅ تست‌های موفق: 14/14
📈 نرخ موفقیت: 100%
══════════════════════════════════════════════

🎉 فاز 1 با موفقیت کامل شد!
✅ تمام زیرساخت‌ها آماده هستند
🚀 می‌توانید به فاز 2 بروید
```

---

## 📊 پروفایل‌های پیش‌فرض

### 1. داستان‌های کوتاه
- min: 150 کلمه
- max: 600 کلمه
- overlap: 40 کلمه
- مناسب برای: حکایت‌های گلستان، داستان‌های رومی

### 2. کتاب‌های معنوی
- min: 200 کلمه
- max: 900 کلمه
- overlap: 70 کلمه
- مناسب برای: کتاب‌های هارولد کلمپ، سخنرانی‌ها

### 3. مقالات علمی
- min: 250 کلمه
- max: 1000 کلمه
- overlap: 80 کلمه
- مناسب برای: مقالات، کتاب‌های درسی

---

## 🐛 عیب‌یابی

### خطا: فایل config.ini یافت نشد
```bash
# فایل را از repository کپی کنید یا دستی ایجاد کنید
```

### خطا: ModuleNotFoundError
```bash
# وابستگی‌ها را نصب کنید
pip install -r requirements.txt
```

### هشدار: Ollama در دسترس نیست
این نرمال است. سیستم بدون Ollama هم کار می‌کند.

برای فعال‌سازی:
```bash
ollama serve
ollama pull embeddinggemma
```

---

## 📝 لاگ‌ها

لاگ‌های کامل در `./logs/app.log` ذخیره می‌شوند.
```bash
# مشاهده لاگ‌ها
tail -f logs/app.log

# پاک کردن لاگ‌ها
rm logs/app.log
```

---

## 🔜 مراحل بعدی

### فاز 2: Chunking Engine
- پیاده‌سازی Stage 1 (Pattern Detection)
- پیاده‌سازی Stage 2 (Coherence Analysis)
- پیاده‌سازی Stage 3 (Semantic Embedding)

### فاز 3: UI ایندکسینگ
- رابط کاربری گرافیکی
- مدیریت فایل‌ها
- نمایش progress

---

## 📄 لایسنس

MIT License

---

## 🤝 مشارکت

مشارکت‌ها خوشآمد است! لطفاً Issue یا Pull Request ایجاد کنید.

---

**نسخه:** 1.0.0 - فاز 1  
**تاریخ:** 2025-10-16